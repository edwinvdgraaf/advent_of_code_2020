module DayThree
  def self.call
    puts "Running #{self.to_s}"
    exercise_1
    exercise_2
  end

  private
  def self.exercise_1
    puts "exercise 1"
    grid = DayThree::Grid.new(self.input)
    walker = DayThree::Walker.new(grid, [3, 1])
    values = walker.collect
    trees = values.filter { | tree_or_open | tree_or_open == "#" }
    puts "Found #{trees.length} trees"
  end

  def self.exercise_2
    puts "exercise 2"
    grid = DayThree::Grid.new(self.input)

    slopes = [
      [1, 1], [3, 1], [5, 1], [7, 1], [1, 2],
    ]

    trees = slopes.map do |slope_vector|
      walker = DayThree::Walker.new(grid, slope_vector)
      values = walker.collect.filter { | tree_or_open | tree_or_open == "#" }
      values.length
    end

    puts trees

    puts "Found answer #{trees.inject(1, :*)}"
  end

  def self.input
   "...........#..#.#.###....#.....
    ...#..#...........#.#...#......
    #.....#..#........#...#..##....
    ..#...##.#.....#.............#.
    #.#..#......#.....#....#.......
    .....#......#..#....#.....#....
    .......#.#..............#......
    .....#...#..........##...#.....
    ...#....#.#...#.#........#...#.
    ..#.........###.......##...##..
    .#....#...........#........#..#
    ..#.............##.............
    ..#.##.#....#................#.
    .....##.#.......#....#...#.....
    ......#.#....##................
    ..#..........###..#..#.#..#....
    ....#..............#....##..#.#
    .#.........#.#....#.#.#....#...
    ..#.....#......##.#....#.......
    ..#.#....#..#.#...##....###....
    ...#......##...#........#.#..#.
    .##.#.......##....#............
    ...##..#.#............#...#.#..
    .##...##.#..#..................
    ..#......##......#......##.....
    .....##...#..#...#.........#...
    .##.#.....#..#..#.##....##....#
    ..#.#......#.......##..........
    ......................#......##
    ##.#...#.................#.#.#.
    ......#.#..........#.....##.#..
    #.#......#.....#...........#...
    .....#...#.......#..#..#.#...#.
    ...........#......#.#...#......
    ....##...##...........#......#.
    .........#.##..................
    ......#...#....#......##.##...#
    ......#...#.#########......#...
    .......#.#...#.......#..#......
    ............#...#...#.###...##.
    ...........#..........#...#....
    ...#..#.#................#.#..#
    ..#....#.....#.............#.#.
    ....##......#........#....#....
    ........##...............#....#
    ........#..#...#..............#
    ...#....#.#...#..#...#....#.#.#
    .........#.......#....##.......
    #.##..............#.#........##
    ......................###......
    .........#....##..##....#.#.#..
    .#...##.#.#...#....##..#.....#.
    ....................#.#......#.
    .#..#.......................#..
    ..#..#.............#..#....#...
    ...#...#..#...#...#.#..#.##....
    ........#....#...#....#........
    .#.....#........#.........#...#
    ...#......#..#..#..####..#.....
    #....#..............#.##.......
    .#....#.............##...#.....
    ....#...#.##........##......#..
    ##....#...#.......#..#........#
    ....##........................#
    ..................#..#.........
    ..#....#........#..#.......#...
    #...#..#....#...##...........#.
    .........#..#..#.#.##..........
    ....#.#..#.....#..#.#.#.#..#.##
    ##................#.##.....#...
    .#.....###..#..#..#.....#....##
    ...#...........#..........####.
    .#.....#....#......#.##..#.#...
    ..#...##....#................#.
    ........#.......#......#.#.....
    ....#.#.#.#....#...#......#..#.
    ...........#......#..#.........
    ###...##......##.#..#....##....
    ##....##.........#..#....###...
    #.#.....#....#......#...#..##..
    #....##.#..............#.##....
    .#........#.#.........#...#....
    ......................#......#.
    ........#..#..##.....#..#.#....
    ..#...###.................#..#.
    ...#...#............#..........
    .##.......#..#.........#....#..
    .#..............#....#....##...
    ...............##..#.#.......##
    .#.....#....#...#..#.......#..#
    #..#.............#....#......#.
    .....#.#......#.........###..#.
    .#...#.#...............#....#..
    #......#.............#.........
    .#.##.#.####...#..#.##..#.....#
    .....#......#..#...#.......#...
    #........###...#.....#..#.....#
    ....#.#.....#...#..........#...
    ...#.#.......#.#......#..#.##..
    ..#..........#.#..#.......#.#..
    #...#.#..............#...###.#.
    ...#..#...#............###.....
    ..#..#...#.#............#..#...
    .###.#.....................#..#
    ....#....#..#.....##.##........
    #....#....#.#..#.........#.....
    .#.....##....#............##..#
    #....#.#...#...#..#.#......#...
    #.....##.....##.....##.#...##..
    ...##...#..#..####.#........#..
    .........#...#......##..##..#..
    ..#.....###.#..#..####.#.......
    .......#......#...#..##....#...
    .#.....#.#.#..#....#...#..##...
    ..........#.#...#...#.#..#.....
    ....#.....#........#.....##..#.
    ..#.#.##.........#...##.....##.
    .........#.##....#............#
    ............##.....#.......#.#.
    ......#.....#...#..#..###......
    ##.....#.......#...##.#....#...
    ...........##......#..##...#.#.
    ..#.#.#.#...#.......#....#...#.
    #.............#.....#.#...###..
    ##....#.......#.....#..##.#....
    ...#.......#....#.........##...
    ......#.......#......##.##.....
    ..#......#...#.#........#......
    ....#.#....#.#.##......#.....#.
    #......#.........#..#....#.....
    ........#..#....##.....#.......
    #......##....#.##....#......#..
    ..#.......#............##.....#
    ...........#...#...........#...
    #.......#...#....#....#...#.#.#
    ..###..#........#........#.....
    ..#..###...........#.#......#..
    .#...........#......#..........
    .#.......#.....#.......#.......
    ..#......##.#............#....#
    #..........#.....#.#..#........
    .....#...##.##.......#......#..
    ..........#.....#........#.#.#.
    ....#......#.....#......#.#....
    .........#.#.#..#...##....#...#
    .........#.......#...##...#.#..
    .##........#...............#...
    .......#....#...........##.....
    .........###......#.........#.#
    ......#.......#...#..........#.
    ...#.#..........##......#...#..
    #.......#.#..........#.........
    ................#..#......#..##
    .....#...#....#.#.....#........
    #.....#....#...........#....#..
    #....#.#..#...##....#...##.#...
    ...#.....#......#.#....#..#..#.
    ..#................#...#.#..##.
    ..........#..............#..#.#
    .....##.....#..#.###...........
    ....#.#......#.#...........#...
    .#....#.#.........##.#....#....
    .#.#........#........###....#..
    ##.#................#...#..#...
    .......#......##..#.....#..#.#.
    ...#............#......###...##
    #.#...........#.........#......
    .....#.#.#.................#...
    ....#..............#...#.#.....
    ...#.#.....##..#...............
    .#..##...#....##.....###..#....
    ...............#...#...#.#.###.
    .###....#.....#...#.#......#...
    ...#..#.....#.......#..##.#....
    ...........#..#....##..#...#...
    ...#...#..........#.......##.#.
    ............#.#.......#........
    ....#.........#.....#..........
    ...#.###.##..#...##..####..#..#
    .#.#...#..#...................#
    .....#..#.....##..#............
    ....#......#...##..#.##........
    ...#...............#..#.....##.
    ...#......#.........#.#..##....
    .#....#.##.......#......#......
    ....#.......#....#..........#..
    #.#.#....###.#.#.............#.
    ..##..###........#.#..#.#..#...
    ......#.#............##.#...###
    .........#.#....#####.....##...
    ............##......#.#..#.....
    ...#.....#.....###....#........
    ##..........####.##.#.#........
    ....................##.....##.#
    #.#............#........#......
    ....#...##.....#......#....#...
    ...###.#..##..................#
    ..###......#..............#.#.#
    .#...#...........#....#........
    ....#............#..#..#.#.....
    ...#.........#.#.........#.####
    ..#...#...#...#...........#....
    ...............#.#......##..#..
    #....#.#.......#.#..#......#..#
    ........#.#....#..#...#..#...#.
    ...#..#.......#...........#....
    ...........#.......#...........
    .#......#................#.....
    ....#.#.#...#......#..#...#....
    ................#.#.#....#.....
    .........................##..#.
    .#...........#............##...
    #...............#.....##.#.#..#
    .........#.......###....#.....#
    ....##...#...#.....#..#........
    ........#.....#..#.#.#...#..#..
    ......#.......#.#.........#.#..
    #......#............#...#....#.
    #..##...#..#................#..
    .##...#...#.....#.##.......#..#
    .......#.##........##..##......
    ##.#..##...............#.....#.
    ......#....#..##...#......###.#
    #........##..#....#.#......#...
    .#......##.#...#.#...#.........
    .#.#...#..#.............#......
    .##..........#..........#......
    .#.....#.....#..............#.#
    ..#.........#..#.#.....#.#....#
    ..#.##..............##...#..###
    ....................#..........
    ......###..#..#...........#....
    ..#..........#.......#...#.....
    ...#......#......#.............
    ....##..............#.#.....#..
    ........#.#......#..#........##
    .............#...#.#.........##
    ...###...#..........##.......#.
    .#..........#...##..#.#.....#..
    ##...#.........#...............
    ......#....#....#.....#.....#..
    ..........#....#...#...#..#...#
    ...##....#.#.#..#...##.........
    #......#.#...##.###...#....#...
    ##.......##.#......##..#...#...
    ......#.............#.##.....##
    #.......###....####.#...##....#
    ..#...#..#.......#..........#..
    #.....#..#..#..#.##...###...#..
    .....##.#..#..#..#.#....#...#..
    ..#...#..................##....
    ....#.#........##..............
    #...#.......##...#...#.#.......
    ..#...#........##....#.#.......
    ..........###...###...#......#.
    #.....#..###...##...##..#..#..#
    ..#.....##.....#.......##..#.#.
    ........#........#.........#...
    .................#....#.......#
    .......#...#.....#...#.#.......
    ....##...............#...##...#
    .##...#................#...#...
    .............#.................
    .#..#....#....#.#....#.........
    .#.#..#..........#.......#.....
    .....##.....##...#..#..........
    #...#.#.........#......#..#....
    ........#....#...#....#.#.##...
    ....#..#........#...#...#......
    .#..#.....#.#...#.........#....
    .#..#..#...........#..#....#...
    ....###.............#..#.......
    #......#..#..##..........#.#...
    #..#..#.##..#...#.#.#..........
    ....###......#.##.....#....#...
    .##..#...#......##.#...........
    ..#..#.......#.....#.##....#.#.
    .......#.#.#........#....##....
    ..##...#....#...............###
    #..##..#...........#.#....##...
    ...##..#.....................#.
    ###......#....#....###..#...##.
    .........##............#..#...#
    ..#..........#...#.#.#......#.#
    .......#.....##..##......#.##..
    #..........#.....##.#..........
    #.......#.#...#...#....#.......
    #...#.....##.......#.#..#.#.#..
    .........#.#.#..#..#...#.###...
    .................##...#....#...
    ###.......#..........##...#....
    #.#..#.........#....##.#.......
    ......#.#.....#........#.......
    .......#.#........#......#.#..#
    ..............#..#...##....#..#
    #...........#...##.....#..#.#..
    ..#....#..#.#.#...#..#....#.#..
    ...##.#.....#..#...##..#.....#.
    ..#.#................#........#
    ......#...#.............#......
    .##............#....#...#..#...
    ....#...#...........#.......#..
    .###..#.......#.............#.#
    .#.#....#.#...........#.#......
    ...#.........#.........#..#....
    ...#..........#.#.....#.#......
    .....#........#....##......#...
    ..#.#.#......#..#.#......#....#
    .#.#..#................#.#.....
    .#.#.........##...#.......#.#.#
    #..#.....#...#..#...........#..
    ..##......####......#..#....###
    #.....###....#.#........#..#..#
    ..##.#...#.#..##..........#..#.
    #.........#.#.............#...#
    ...#.#...#...#.#.#....##.......
    ##.##...#.....#...#...........#
    ....#........#.#.....#.........
    .................##..#..##...##
    .....##....#...#...#.....#..#..
    ....#...#........#............#
    ..#...........##....#...#...##.
    .....#......#.........#..##.#..
    "
  end

  def self.example_input
  "..##.......
  #...#...#..
  .#....#..#.
  ..#.#...#.#
  .#...##..#.
  ..#.##.....
  .#.#.#....#
  .#........#
  #.##...#...
  #...##....#
  .#..#...#.#"
  end
end

require "advent_of_code_2020/puzzles/day_three/grid"
require "advent_of_code_2020/puzzles/day_three/walker"